<!-- ========================== /category.html ========================== -->
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title id="t">Category — Photography</title>
  <meta name="description" id="d" content="Project list." />
  <link rel="icon" href="assets/favicon.svg" type="image/svg+xml" />
  <link rel="stylesheet" href="site.css" />
</head>
<body>
  <header class="site-header">
    <a class="brand" href="./">Andrew Nguyen</a>
    <nav class="nav">
      <a href="./category.html?c=automotive">Automotive</a>
      <a href="./category.html?c=lifestyle">Lifestyle</a>
      <a href="./about.html">About</a>
    </nav>
  </header>

  <main>
    <section class="collection-head">
      <h1 id="title">Collection</h1>
      <p id="blurb" class="muted"></p>
    </section>
    <section class="projects" id="project-list"></section>
  </main>

  <footer class="site-footer">© <span id="y2"></span> Andrew Nguyen</footer>

  <script src="data.js"></script>
  <script src="site.js"></script>
  <script>
    const params = new URLSearchParams(location.search);
    const cslug = (params.get('c') || '').toLowerCase();
    const col = COLLECTIONS.find(c => c.slug === cslug);

    if (!col) {
      document.getElementById('title').textContent = 'Not found';
      document.getElementById('blurb').textContent = 'This collection does not exist.';
    } else {
      document.getElementById('t').textContent = `${col.title} — Photography`;
      document.getElementById('d').setAttribute('content', col.blurb);
      document.getElementById('title').textContent = col.title;
      document.getElementById('blurb').textContent = col.blurb;

      const list = document.getElementById('project-list');
      const projects = PROJECTS.filter(p => p.collection === cslug)
        .sort((a,b)=> (b.year||0)-(a.year||0));
      list.innerHTML = projects.map(p => `
        <a class="project-tile" href="project.html?p=${encodeURIComponent(p.slug)}" aria-label="${p.title}">
          <div class="tile-media"><img src="${p.cover}" alt="${p.title}" loading="lazy" /></div>
          <div class="tile-meta">
            <h2>${p.title}</h2>
            <p>${[p.client, p.location, p.year].filter(Boolean).join(' • ') || p.blurb}</p>
          </div>
        </a>
      `).join('');
    }
  </script>
</body>
</html>
